<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Raiku Free Run</title>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<style>
html,body{margin:0;overflow:hidden;height:100%;font-family:Arial;}
canvas{display:block;width:100vw;height:100vh;background:#222;}
#startScreen,#gameOverScreen{
  position:absolute;inset:0;display:flex;flex-direction:column;
  align-items:center;justify-content:center;
  background:rgba(0,0,0,0.75);color:#fff;
  z-index:10;transition:opacity 0.4s ease;
}
#startScreen.hidden,#gameOverScreen.hidden{opacity:0;pointer-events:none;z-index:-1;}
button{padding:10px 20px;font-size:16px;border:none;border-radius:8px;background:#007bff;color:white;cursor:pointer;margin-top:10px;}
#hud{position:absolute;top:10px;left:10px;color:#fff;font-size:18px;font-weight:bold;text-shadow:0 1px 2px rgba(0,0,0,0.7);z-index:5;display:none;}
</style>
</head>
<body>
<div id="startScreen">
  <h1>Tap to Play</h1>
  <button id="startBtn">Start</button>
  <p style="font-size:13px;color:#ccc">Swipe left/right to dodge cars</p>
</div>
<div id="gameOverScreen" class="hidden">
  <h1>Game Over</h1>
  <p>Score: <span id="finalScore">0</span></p>
  <button id="restartBtn">Restart</button>
</div>
<div id="hud">Score: 0</div>
<canvas id="gameCanvas"></canvas>

<script>
const canvas=document.getElementById("gameCanvas");
const ctx=canvas.getContext("2d");

function resizeCanvas(){
  const dpr=window.devicePixelRatio||1;
  canvas.width=window.innerWidth*dpr;
  canvas.height=window.innerHeight*dpr;
  ctx.setTransform(dpr,0,0,dpr,0,0);
}
resizeCanvas();
window.addEventListener("resize",resizeCanvas);

let W=window.innerWidth,H=window.innerHeight;
let LANE_W=W/3;
let GROUND_Y=H-80;

let player={
  width:40,height:60,x:W/2-20,y:GROUND_Y-60, speed:10
};
const raiku=new Image();
raiku.src='https://raw.githubusercontent.com/DrKrishnaM/raiku-image/main/1759800939823.jpg';

let gameStarted=false,gameOver=false,score=0,obstacles=[],spawnTimer=0;
const baseSpeed=5;
const hud=document.getElementById("hud");

let touchX=0;
canvas.addEventListener("touchstart",e=>{
  touchX=e.touches[0].clientX;
});
canvas.addEventListener("touchmove",e=>{
  if(!gameStarted||gameOver)return;
  const dx=e.touches[0].clientX-touchX;
  player.x+=dx;
  if(player.x<0)player.x=0;
  if(player.x+player.width>W)player.x=W-player.width;
  touchX=e.touches[0].clientX;
  e.preventDefault();
},{passive:false});

function drawBackground(){
  ctx.fillStyle="#333";
  ctx.fillRect(0,0,W,H);
  ctx.strokeStyle="#fff";
  ctx.lineWidth=4;
  for(let i=1;i<3;i++){
    const x=i*LANE_W;
    for(let y=-40;y<H;y+=40){
      ctx.beginPath();
      ctx.moveTo(x,y+(score%40));
      ctx.lineTo(x,y+20+(score%40));
      ctx.stroke();
    }
  }
  ctx.fillStyle="#2e7d32";
  ctx.fillRect(0,GROUND_Y,W,80);
}

function drawPlayer(){
  if(raiku.complete&&raiku.naturalWidth){
    ctx.drawImage(raiku,player.x,player.y,player.width,player.height);
  }else{
    ctx.fillStyle="red";
    ctx.fillRect(player.x,player.y,player.width,player.height);
  }
}

const carImages=[]; 
const carUrls=[
'https://upload.wikimedia.org/wikipedia/commons/3/36/Red_sports_car_top_view.png',
'https://upload.wikimedia.org/wikipedia/commons/8/8b/Blue_car_top_view.png',
'https://upload.wikimedia.org/wikipedia/commons/5/52/Yellow_car_top_view.png'
];
carUrls.forEach(url=>{
  const img=new Image(); img.src=url; carImages.push(img);
});

function spawnObstacle(){
  const lane=Math.floor(Math.random()*3);
  const img=carImages[Math.floor(Math.random()*carImages.length)];
  obstacles.push({
    x:LANE_W*lane+(LANE_W-60)/2,
    y:-100,width:60,height:100,img,imgSpeed:baseSpeed+score/300
  });
}

function startGame(){
  gameStarted=true;gameOver=false;score=0;obstacles=[];
  player.x=W/2-20;
  document.getElementById("startScreen").classList.add("hidden");
  document.getElementById("gameOverScreen").classList.add("hidden");
  hud.style.display="block";
  update();
}

function restartGame(){
  gameOver=false;gameStarted=true;score=0;obstacles=[];
  player.x=W/2-20;
  document.getElementById("gameOverScreen").classList.add("hidden");
  hud.style.display="block";
  update();
}

function update(){
  if(!gameStarted||gameOver)return;
  ctx.clearRect(0,0,W,H);
  drawBackground();
  drawPlayer();

  spawnTimer++;
  if(spawnTimer>80){spawnObstacle();spawnTimer=0;}

  for(let i=obstacles.length-1;i>=0;i--){
    const o=obstacles[i];
    o.y+=o.imgSpeed;
    if(o.img.complete)o.img.naturalWidth?ctx.drawImage(o.img,o.x,o.y,o.width,o.height):ctx.fillRect(o.x,o.y,o.width,o.height);
    else ctx.fillRect(o.x,o.y,o.width,o.height);

    if(player.x<o.x+o.width&&player.x+player.width>o.x&&player.y<o.y+o.height&&player.y+player.height>o.y){
      gameOver=true;
      document.getElementById("finalScore").textContent=score;
      document.getElementById("gameOverScreen").classList.remove("hidden");
      hud.style.display="none";
      return;
    }
    if(o.y>H+150)obstacles.splice(i,1);
  }

  score++;
  hud.textContent=`Score: ${score}`;
  requestAnimationFrame(update);
}

document.getElementById("startBtn").onclick=startGame;
document.getElementById("restartBtn").onclick=restartGame;
</script>
</body>
</html>
